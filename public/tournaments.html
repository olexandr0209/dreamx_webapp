<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>DreamX â€” Tournaments</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="style.css" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- ÐÐ°Ñˆ Ð·Ð°Ð³Ð°Ð»ÑŒÐ½Ð¸Ð¹ core-ÑÐºÑ€Ð¸Ð¿Ñ‚ -->
    <script src="dreamx_core.js"></script>
</head>

<body class="tournament-screen">
    <div class="top-bar-home">
        <div class="logo-main-top">DreamX</div>
    </div>

    <!-- Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð¸Ð¹ ÑÐºÑ€Ð¾Ð»-Ð±Ð»Ð¾Ðº -->
    <div class="tournament-container">
        <h1 class="tournament-title">Tournaments</h1>

        <!-- ðŸ”¥ Ð”ÐžÐ”ÐÐ’ id, Ñ‰Ð¾Ð± JS Ð¼Ñ–Ð³ Ð·Ð½Ð°Ð¹Ñ‚Ð¸ ÐºÐ½Ð¾Ð¿ÐºÑƒ -->
        <button class="mode-card" id="mode-vs-computer">
            <div class="mode-title">Play vs Computer</div>
            <div class="mode-sub">Fast game â€¢ Earn coins</div>
        </button>
    </div>

    <div class="bottom-nav">
        <button class="bottom-btn bottom-btn-secondary" id="back-home">
            Back
        </button>
    </div>

    <script>
        // Ð‘ÐµÐ·Ð¿ÐµÑ‡Ð½Ð° Ñ€Ð¾Ð±Ð¾Ñ‚Ð° Ð· ÐºÐ½Ð¾Ð¿ÐºÐ°Ð¼Ð¸: Ð¿ÐµÑ€ÐµÐ²Ñ–Ñ€ÑÑ”Ð¼Ð¾, Ñ‡Ð¸ Ð²Ð¾Ð½Ð¸ Ñ–ÑÐ½ÑƒÑŽÑ‚ÑŒ

        const modeBtn = document.getElementById("mode-vs-computer");
        if (modeBtn) {
            modeBtn.addEventListener("click", () => {
                const params = new URLSearchParams(window.location.search);

                // ÑÑ‚Ð°Ñ€Ñ– points Ð½Ð°Ð¼ Ð½Ðµ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ñ–
                params.delete("points");

                const qs = params.toString();
                window.location.href = qs ? `game.html?${qs}` : "game.html";
            });
        }

        const backBtn = document.getElementById("back-home");
        if (backBtn) {
            backBtn.addEventListener("click", () => {
                const params = new URLSearchParams(window.location.search);
                params.delete("points");
                const qs = params.toString();
                window.location.href = qs ? `index.html?${qs}` : "index.html";
            });
        }
    </script>

    <script>
            const container = document.querySelector(".tournament-container");
        
            function hasScroll() {
                if (!container) return false;
                return container.scrollHeight > container.clientHeight;
            }
        
            function enableBounce() {
                if (!container) return;
        
                let startY = 0;
                let isDragging = false;
                let isMouse = false;
        
                // TOUCH
                container.addEventListener("touchstart", (e) => {
                    if (hasScroll()) return;    // ÑÐºÑ‰Ð¾ Ñ” ÑÐºÑ€Ð¾Ð» â€“ Ð½Ðµ Ñ€Ð¾Ð±Ð¸Ð¼Ð¾ bounce
                    if (e.touches.length !== 1) return;
        
                    isDragging = true;
                    isMouse = false;
                    startY = e.touches[0].clientY;
                    container.style.transition = "none";
                });
        
                container.addEventListener("touchmove", (e) => {
                    if (!isDragging || isMouse) return;
                    if (hasScroll()) return;
        
                    const currentY = e.touches[0].clientY;
                    let delta = currentY - startY;
        
                    const MAX = 40;
                    delta = Math.max(-MAX, Math.min(MAX, delta));
                    const softened = delta * 0.4;
        
                    container.style.transform = `translateY(${softened}px)`;
                });
        
                const endTouch = () => {
                    if (!isDragging || isMouse) return;
                    isDragging = false;
                    container.style.transition = "transform 0.25s ease-out";
                    container.style.transform = "translateY(0)";
                };
        
                container.addEventListener("touchend", endTouch);
                container.addEventListener("touchcancel", endTouch);
        
                // MOUSE â€“ Ñ‰Ð¾Ð± Ñ‚Ð¸ Ð±Ð°Ñ‡Ð¸Ð² ÐµÑ„ÐµÐºÑ‚ Ñƒ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ñ– Ð½Ð° Ð½Ð¾ÑƒÑ‚Ñ–
                container.addEventListener("mousedown", (e) => {
                    if (hasScroll()) return;
        
                    isDragging = true;
                    isMouse = true;
                    startY = e.clientY;
                    container.style.transition = "none";
                });
        
                window.addEventListener("mousemove", (e) => {
                    if (!isDragging || !isMouse) return;
                    if (hasScroll()) return;
        
                    const currentY = e.clientY;
                    let delta = currentY - startY;
        
                    const MAX = 40;
                    delta = Math.max(-MAX, Math.min(MAX, delta));
                    const softened = delta * 0.4;
        
                    container.style.transform = `translateY(${softened}px)`;
                });
        
                window.addEventListener("mouseup", () => {
                    if (!isDragging || !isMouse) return;
                    isDragging = false;
                    container.style.transition = "transform 0.25s ease-out";
                    container.style.transform = "translateY(0)";
                });
            }
        
            enableBounce();
    </script>


</body>
</html>
