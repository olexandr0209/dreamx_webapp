<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>DreamX ‚Äî Tournaments</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="style.css" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- –ù–∞—à –∑–∞–≥–∞–ª—å–Ω–∏–π core-—Å–∫—Ä–∏–ø—Ç -->
    <script src="dreamx_core.js"></script>
</head>

<body class="tournament-screen">
    <div class="top-bar-home">
        <div class="logo-main-top">DreamX</div>
    </div>

    <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π —Å–∫—Ä–æ–ª-–±–ª–æ–∫ -->
    <div class="tournament-container">
        <h1 class="tournament-title">–û–±–µ—Ä–∏ –≥—Ä—É</h1>

        <!-- üî• –î–û–î–ê–í id, —â–æ–± JS –º—ñ–≥ –∑–Ω–∞–π—Ç–∏ –∫–Ω–æ–ø–∫—É -->
        <button class="mode-card" id="mode-vs-computer">
            <div class="mode-title">–¢–∏ vs –ö–æ–º–ø º—é—Ç–µ—Ä</div>
            <div class="mode-sub">Fast game ‚Ä¢ Earn coins</div>
        </button>
    </div>

    <div class="bottom-nav">
        <button class="bottom-btn bottom-btn-secondary" id="back-home">
            –ù–ê–ó–ê–î
        </button>
    </div>

    <script>
        // –ë–µ–∑–ø–µ—á–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ –∫–Ω–æ–ø–∫–∞–º–∏: –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –≤–æ–Ω–∏ —ñ—Å–Ω—É—é—Ç—å

        const modeBtn = document.getElementById("mode-vs-computer");
        if (modeBtn) {
            modeBtn.addEventListener("click", () => {
                const params = new URLSearchParams(window.location.search);

                // —Å—Ç–∞—Ä—ñ points –Ω–∞–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ
                params.delete("points");

                const qs = params.toString();
                window.location.href = qs ? `game.html?${qs}` : "game.html";
            });
        }

        const backBtn = document.getElementById("back-home");
        if (backBtn) {
            backBtn.addEventListener("click", () => {
                const params = new URLSearchParams(window.location.search);
                params.delete("points");
                const qs = params.toString();
                window.location.href = qs ? `index.html?${qs}` : "index.html";
            });
        }
    </script>

    <script>
            const container = document.querySelector(".tournament-container");
        
            function hasScroll() {
                if (!container) return false;
                return container.scrollHeight > container.clientHeight;
            }
        
            function enableBounce() {
                if (!container) return;
        
                let startY = 0;
                let isDragging = false;
                let isMouse = false;
        
                // TOUCH
                container.addEventListener("touchstart", (e) => {
                    if (hasScroll()) return;    // —è–∫—â–æ —î —Å–∫—Ä–æ–ª ‚Äì –Ω–µ —Ä–æ–±–∏–º–æ bounce
                    if (e.touches.length !== 1) return;
        
                    isDragging = true;
                    isMouse = false;
                    startY = e.touches[0].clientY;
                    container.style.transition = "none";
                });
        
                container.addEventListener("touchmove", (e) => {
                    if (!isDragging || isMouse) return;
                    if (hasScroll()) return;
        
                    const currentY = e.touches[0].clientY;
                    let delta = currentY - startY;
        
                    const MAX = 40;
                    delta = Math.max(-MAX, Math.min(MAX, delta));
                    const softened = delta * 0.4;
        
                    container.style.transform = `translateY(${softened}px)`;
                });
        
                const endTouch = () => {
                    if (!isDragging || isMouse) return;
                    isDragging = false;
                    container.style.transition = "transform 0.25s ease-out";
                    container.style.transform = "translateY(0)";
                };
        
                container.addEventListener("touchend", endTouch);
                container.addEventListener("touchcancel", endTouch);
        
                // MOUSE ‚Äì —â–æ–± —Ç–∏ –±–∞—á–∏–≤ –µ—Ñ–µ–∫—Ç —É –±—Ä–∞—É–∑–µ—Ä—ñ –Ω–∞ –Ω–æ—É—Ç—ñ
                container.addEventListener("mousedown", (e) => {
                    if (hasScroll()) return;
        
                    isDragging = true;
                    isMouse = true;
                    startY = e.clientY;
                    container.style.transition = "none";
                });
        
                window.addEventListener("mousemove", (e) => {
                    if (!isDragging || !isMouse) return;
                    if (hasScroll()) return;
        
                    const currentY = e.clientY;
                    let delta = currentY - startY;
        
                    const MAX = 40;
                    delta = Math.max(-MAX, Math.min(MAX, delta));
                    const softened = delta * 0.4;
        
                    container.style.transform = `translateY(${softened}px)`;
                });
        
                window.addEventListener("mouseup", () => {
                    if (!isDragging || !isMouse) return;
                    isDragging = false;
                    container.style.transition = "transform 0.25s ease-out";
                    container.style.transform = "translateY(0)";
                });
            }
        
            enableBounce();
    </script>


</body>
</html>
